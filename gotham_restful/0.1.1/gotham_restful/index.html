<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate is an extension to the popular gotham web framework for Rust. It allows you to create resources with assigned methods that aim to be a more convenient way of creating handlers for requests."><meta name="keywords" content="rust, rustlang, rust-lang, gotham_restful"><title>gotham_restful - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" 
        data-theme="ayu"
        data-use_system_theme="false"></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../gotham_restful/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../gotham_restful/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate gotham_restful</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.1.1</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li><li><a href="#attributes">Attribute Macros</a></li><li><a href="#derives">Derive Macros</a></li></ul></div></section><div id="sidebar-vars" data-name="gotham_restful" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../gotham_restful/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">gotham_restful</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/gotham_restful/lib.rs.html#1-460">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate is an extension to the popular <a href="https://gotham.rs/">gotham web framework</a> for Rust. It allows you to
create resources with assigned methods that aim to be a more convenient way of creating handlers
for requests.</p>
<h2 id="features"><a href="#features">Features</a></h2>
<ul>
<li>Automatically parse <strong>JSON</strong> request and produce response bodies</li>
<li>Allow using <strong>raw</strong> request and response bodies</li>
<li>Convenient <strong>macros</strong> to create responses that can be registered with gotham’s router</li>
<li>Auto-Generate an <strong>OpenAPI</strong> specification for your API</li>
<li>Manage <strong>CORS</strong> headers so you don’t have to</li>
<li>Manage <strong>Authentication</strong> with JWT</li>
<li>Integrate diesel connection pools for easy <strong>database</strong> integration</li>
</ul>
<h2 id="safety"><a href="#safety">Safety</a></h2>
<p>This crate is just as safe as you’d expect from anything written in safe Rust - and
<code>#![forbid(unsafe_code)]</code> ensures that no unsafe was used.</p>
<h2 id="methods"><a href="#methods">Methods</a></h2>
<p>Assuming you assign <code>/foobar</code> to your resource, you can implement the following methods:</p>
<div><table><thead><tr><th>Method Name</th><th>Required Arguments</th><th>HTTP Verb</th><th>HTTP Path</th></tr></thead><tbody>
<tr><td>read_all</td><td></td><td>GET</td><td>/foobar</td></tr>
<tr><td>read</td><td>id</td><td>GET</td><td>/foobar/:id</td></tr>
<tr><td>search</td><td>query</td><td>GET</td><td>/foobar/search</td></tr>
<tr><td>create</td><td>body</td><td>POST</td><td>/foobar</td></tr>
<tr><td>change_all</td><td>body</td><td>PUT</td><td>/foobar</td></tr>
<tr><td>change</td><td>id, body</td><td>PUT</td><td>/foobar/:id</td></tr>
<tr><td>remove_all</td><td></td><td>DELETE</td><td>/foobar</td></tr>
<tr><td>remove</td><td>id</td><td>DELETE</td><td>/foobar/:id</td></tr>
</tbody></table>
</div>
<p>Each of those methods has a macro that creates the neccessary boilerplate for the Resource. A
simple example could look like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Our RESTful resource.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Resource</span>)]</span>
<span class="attribute">#[<span class="ident">resource</span>(<span class="ident">read</span>)]</span>
<span class="kw">struct</span> <span class="ident">FooResource</span>;

<span class="doccomment">/// The return type of the foo read method.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>)]</span>
<span class="kw">struct</span> <span class="ident">Foo</span> {
	<span class="ident">id</span>: <span class="ident">u64</span>
}

<span class="doccomment">/// The foo read method handler.</span>
<span class="attribute">#[<span class="ident">read</span>(<span class="ident">FooResource</span>)]</span>
<span class="kw">fn</span> <span class="ident">read</span>(<span class="ident">id</span>: <span class="ident">u64</span>) -&gt; <span class="ident">Success</span><span class="op">&lt;</span><span class="ident">Foo</span><span class="op">&gt;</span> {
	<span class="ident">Foo</span> { <span class="ident">id</span> }.<span class="ident">into</span>()
}</code></pre></div>
<h2 id="arguments"><a href="#arguments">Arguments</a></h2>
<p>Some methods require arguments. Those should be</p>
<ul>
<li><strong>id</strong> Should be a deserializable json-primitive like <code>i64</code> or <code>String</code>.</li>
<li><strong>body</strong> Should be any deserializable object, or any type implementing <a href="trait.RequestBody.html"><code>RequestBody</code></a>.</li>
<li><strong>query</strong> Should be any deserializable object whose variables are json-primitives. It will
however not be parsed from json, but from HTTP GET parameters like in <code>search?id=1</code>. The
type needs to implement <a href="../gotham/extractor/trait.QueryStringExtractor.html"><code>QueryStringExtractor</code></a>.</li>
</ul>
<p>Additionally, non-async handlers may take a reference to gotham’s <a href="../gotham/state/struct.State.html"><code>State</code></a>. If you need to
have an async handler (that is, the function that the method macro is invoked on is declared
as <code>async fn</code>), consider returning the boxed future instead. Since <a href="../gotham/state/struct.State.html"><code>State</code></a> does not implement
<code>Sync</code> there is unfortunately no more convenient way.</p>
<h2 id="uploads-and-downloads"><a href="#uploads-and-downloads">Uploads and Downloads</a></h2>
<p>By default, every request body is parsed from json, and every respone is converted to json using
<a href="https://github.com/serde-rs/json#serde-json----">serde_json</a>. However, you may also use raw bodies. This is an example where the request body
is simply returned as the response again, no json parsing involved:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Resource</span>)]</span>
<span class="attribute">#[<span class="ident">resource</span>(<span class="ident">create</span>)]</span>
<span class="kw">struct</span> <span class="ident">ImageResource</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">FromBody</span>, <span class="ident">RequestBody</span>)]</span>
<span class="attribute">#[<span class="ident">supported_types</span>(<span class="ident">mime::IMAGE_GIF</span>, <span class="ident">mime::IMAGE_JPEG</span>, <span class="ident">mime::IMAGE_PNG</span>)]</span>
<span class="kw">struct</span> <span class="ident">RawImage</span> {
	<span class="ident">content</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>,
	<span class="ident">content_type</span>: <span class="ident">Mime</span>
}

<span class="attribute">#[<span class="ident">create</span>(<span class="ident">ImageResource</span>)]</span>
<span class="kw">fn</span> <span class="ident">create</span>(<span class="ident">body</span> : <span class="ident">RawImage</span>) -&gt; <span class="ident">Raw</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span> {
	<span class="ident">Raw::new</span>(<span class="ident">body</span>.<span class="ident">content</span>, <span class="ident">body</span>.<span class="ident">content_type</span>)
}</code></pre></div>
<h2 id="features-1"><a href="#features-1">Features</a></h2>
<p>To make life easier for common use-cases, this create offers a few features that might be helpful
when you implement your web server.  The complete feature list is</p>
<ul>
<li><a href="#authentication-feature"><code>auth</code></a> Advanced JWT middleware</li>
<li><code>chrono</code> openapi support for chrono types</li>
<li><a href="#cors-feature"><code>cors</code></a> CORS handling for all method handlers</li>
<li><a href="#database-feature"><code>database</code></a> diesel middleware support</li>
<li><code>errorlog</code> log errors returned from method handlers</li>
<li><a href="#openapi-feature"><code>openapi</code></a> router additions to generate an openapi spec</li>
<li><code>uuid</code> openapi support for uuid</li>
</ul>
<h3 id="authentication-feature"><a href="#authentication-feature">Authentication Feature</a></h3>
<p>In order to enable authentication support, enable the <code>auth</code> feature gate. This allows you to
register a middleware that can automatically check for the existence of an JWT authentication
token. Besides being supported by the method macros, it supports to lookup the required JWT secret
with the JWT data, hence you can use several JWT secrets and decide on the fly which secret to use.
None of this is currently supported by gotham’s own JWT middleware.</p>
<p>A simple example that uses only a single secret could look like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Resource</span>)]</span>
<span class="attribute">#[<span class="ident">resource</span>(<span class="ident">read</span>)]</span>
<span class="kw">struct</span> <span class="ident">SecretResource</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>)]</span>
<span class="kw">struct</span> <span class="ident">Secret</span> {
	<span class="ident">id</span>: <span class="ident">u64</span>,
	<span class="ident">intended_for</span>: <span class="ident">String</span>
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Deserialize</span>, <span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">AuthData</span> {
	<span class="ident">sub</span>: <span class="ident">String</span>,
	<span class="ident">exp</span>: <span class="ident">u64</span>
}

<span class="attribute">#[<span class="ident">read</span>(<span class="ident">SecretResource</span>)]</span>
<span class="kw">fn</span> <span class="ident">read</span>(<span class="ident">auth</span>: <span class="ident">AuthStatus</span><span class="op">&lt;</span><span class="ident">AuthData</span><span class="op">&gt;</span>, <span class="ident">id</span>: <span class="ident">u64</span>) -&gt; <span class="ident">AuthSuccess</span><span class="op">&lt;</span><span class="ident">Secret</span><span class="op">&gt;</span> {
	<span class="kw">let</span> <span class="ident">intended_for</span> <span class="op">=</span> <span class="ident">auth</span>.<span class="ident">ok</span>()<span class="question-mark">?</span>.<span class="ident">sub</span>;
	<span class="prelude-val">Ok</span>(<span class="ident">Secret</span> { <span class="ident">id</span>, <span class="ident">intended_for</span> })
}

<span class="kw">fn</span> <span class="ident">main</span>() {
	<span class="kw">let</span> <span class="ident">auth</span>: <span class="ident">AuthMiddleware</span><span class="op">&lt;</span><span class="ident">AuthData</span>, <span class="kw">_</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">AuthMiddleware::new</span>(
		<span class="ident">AuthSource::AuthorizationHeader</span>,
		<span class="ident">AuthValidation::default</span>(),
		<span class="ident">StaticAuthHandler::from_array</span>(<span class="string">b&quot;zlBsA2QXnkmpe0QTh8uCvtAEa4j33YAc&quot;</span>)
	);
	<span class="kw">let</span> (<span class="ident">chain</span>, <span class="ident">pipelines</span>) <span class="op">=</span> <span class="ident">single_pipeline</span>(<span class="ident">new_pipeline</span>().<span class="ident">add</span>(<span class="ident">auth</span>).<span class="ident">build</span>());
	<span class="ident">gotham::start</span>(<span class="string">&quot;127.0.0.1:8080&quot;</span>, <span class="ident">build_router</span>(<span class="ident">chain</span>, <span class="ident">pipelines</span>, <span class="op">|</span><span class="ident">route</span><span class="op">|</span> {
		<span class="ident">route</span>.<span class="ident">resource</span>::<span class="op">&lt;</span><span class="ident">SecretResource</span><span class="op">&gt;</span>(<span class="string">&quot;secret&quot;</span>);
	}));
}</code></pre></div>
<h3 id="cors-feature"><a href="#cors-feature">CORS Feature</a></h3>
<p>The cors feature allows an easy usage of this web server from other origins. By default, only
the <code>Access-Control-Allow-Methods</code> header is touched. To change the behaviour, add your desired
configuration as a middleware.</p>
<p>A simple example that allows authentication from every origin (note that <code>*</code> always disallows
authentication), and every content type, could look like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Resource</span>)]</span>
<span class="attribute">#[<span class="ident">resource</span>(<span class="ident">read_all</span>)]</span>
<span class="kw">struct</span> <span class="ident">FooResource</span>;

<span class="attribute">#[<span class="ident">read_all</span>(<span class="ident">FooResource</span>)]</span>
<span class="kw">fn</span> <span class="ident">read_all</span>() {
	<span class="comment">// your handler</span>
}

<span class="kw">fn</span> <span class="ident">main</span>() {
	<span class="kw">let</span> <span class="ident">cors</span> <span class="op">=</span> <span class="ident">CorsConfig</span> {
		<span class="ident">origin</span>: <span class="ident">Origin::Copy</span>,
		<span class="ident">headers</span>: <span class="macro">vec!</span>[<span class="ident">CONTENT_TYPE</span>],
		<span class="ident">max_age</span>: <span class="number">0</span>,
		<span class="ident">credentials</span>: <span class="bool-val">true</span>
	};
	<span class="kw">let</span> (<span class="ident">chain</span>, <span class="ident">pipelines</span>) <span class="op">=</span> <span class="ident">single_pipeline</span>(<span class="ident">new_pipeline</span>().<span class="ident">add</span>(<span class="ident">cors</span>).<span class="ident">build</span>());
	<span class="ident">gotham::start</span>(<span class="string">&quot;127.0.0.1:8080&quot;</span>, <span class="ident">build_router</span>(<span class="ident">chain</span>, <span class="ident">pipelines</span>, <span class="op">|</span><span class="ident">route</span><span class="op">|</span> {
		<span class="ident">route</span>.<span class="ident">resource</span>::<span class="op">&lt;</span><span class="ident">FooResource</span><span class="op">&gt;</span>(<span class="string">&quot;foo&quot;</span>);
	}));
}</code></pre></div>
<p>The cors feature can also be used for non-resource handlers. Take a look at <a href="trait.CorsRoute.html"><code>CorsRoute</code></a>
for an example.</p>
<h3 id="database-feature"><a href="#database-feature">Database Feature</a></h3>
<p>The database feature allows an easy integration of <a href="https://diesel.rs/">diesel</a> into your handler functions. Please
note however that due to the way gotham’s diesel middleware implementation, it is not possible
to run async code while holding a database connection. If you need to combine async and database,
you’ll need to borrow the connection from the <a href="../gotham/state/struct.State.html"><code>State</code></a> yourself and return a boxed future.</p>
<p>A simple non-async example could look like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Resource</span>)]</span>
<span class="attribute">#[<span class="ident">resource</span>(<span class="ident">read_all</span>)]</span>
<span class="kw">struct</span> <span class="ident">FooResource</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Queryable</span>, <span class="ident">Serialize</span>)]</span>
<span class="kw">struct</span> <span class="ident">Foo</span> {
	<span class="ident">id</span>: <span class="ident">i64</span>,
	<span class="ident">value</span>: <span class="ident">String</span>
}

<span class="attribute">#[<span class="ident">read_all</span>(<span class="ident">FooResource</span>)]</span>
<span class="kw">fn</span> <span class="ident">read_all</span>(<span class="ident">conn</span>: <span class="kw-2">&amp;</span><span class="ident">PgConnection</span>) -&gt; <span class="ident">QueryResult</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">Foo</span><span class="op">&gt;</span><span class="op">&gt;</span> {
	<span class="ident">foo::table</span>.<span class="ident">load</span>(<span class="ident">conn</span>)
}

<span class="kw">type</span> <span class="ident">Repo</span> <span class="op">=</span> <span class="ident">gotham_middleware_diesel::Repo</span><span class="op">&lt;</span><span class="ident">PgConnection</span><span class="op">&gt;</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
	<span class="kw">let</span> <span class="ident">repo</span> <span class="op">=</span> <span class="ident">Repo::new</span>(<span class="kw-2">&amp;</span><span class="ident">env::var</span>(<span class="string">&quot;DATABASE_URL&quot;</span>).<span class="ident">unwrap</span>());
	<span class="kw">let</span> <span class="ident">diesel</span> <span class="op">=</span> <span class="ident">DieselMiddleware::new</span>(<span class="ident">repo</span>);

	<span class="kw">let</span> (<span class="ident">chain</span>, <span class="ident">pipelines</span>) <span class="op">=</span> <span class="ident">single_pipeline</span>(<span class="ident">new_pipeline</span>().<span class="ident">add</span>(<span class="ident">diesel</span>).<span class="ident">build</span>());
	<span class="ident">gotham::start</span>(<span class="string">&quot;127.0.0.1:8080&quot;</span>, <span class="ident">build_router</span>(<span class="ident">chain</span>, <span class="ident">pipelines</span>, <span class="op">|</span><span class="ident">route</span><span class="op">|</span> {
		<span class="ident">route</span>.<span class="ident">resource</span>::<span class="op">&lt;</span><span class="ident">FooResource</span><span class="op">&gt;</span>(<span class="string">&quot;foo&quot;</span>);
	}));
}</code></pre></div>
<h3 id="openapi-feature"><a href="#openapi-feature">OpenAPI Feature</a></h3>
<p>The OpenAPI feature is probably the most powerful one of this crate. Definitely read this section
carefully both as a binary as well as a library author to avoid unwanted suprises.</p>
<p>In order to automatically create an openapi specification, gotham-restful needs knowledge over
all routes and the types returned. <code>serde</code> does a great job at serialization but doesn’t give
enough type information, so all types used in the router need to implement <code>OpenapiType</code>. This
can be derived for almoust any type and there should be no need to implement it manually. A simple
example could look like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Resource</span>)]</span>
<span class="attribute">#[<span class="ident">resource</span>(<span class="ident">read_all</span>)]</span>
<span class="kw">struct</span> <span class="ident">FooResource</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">OpenapiType</span>, <span class="ident">Serialize</span>)]</span>
<span class="kw">struct</span> <span class="ident">Foo</span> {
	<span class="ident">bar</span>: <span class="ident">String</span>
}

<span class="attribute">#[<span class="ident">read_all</span>(<span class="ident">FooResource</span>)]</span>
<span class="kw">fn</span> <span class="ident">read_all</span>() -&gt; <span class="ident">Success</span><span class="op">&lt;</span><span class="ident">Foo</span><span class="op">&gt;</span> {
	<span class="ident">Foo</span> { <span class="ident">bar</span>: <span class="string">&quot;Hello World&quot;</span>.<span class="ident">to_owned</span>() }.<span class="ident">into</span>()
}

<span class="kw">fn</span> <span class="ident">main</span>() {
	<span class="ident">gotham::start</span>(<span class="string">&quot;127.0.0.1:8080&quot;</span>, <span class="ident">build_simple_router</span>(<span class="op">|</span><span class="ident">route</span><span class="op">|</span> {
		<span class="kw">let</span> <span class="ident">info</span> <span class="op">=</span> <span class="ident">OpenapiInfo</span> {
			<span class="ident">title</span>: <span class="string">&quot;My Foo API&quot;</span>.<span class="ident">to_owned</span>(),
			<span class="ident">version</span>: <span class="string">&quot;0.1.0&quot;</span>.<span class="ident">to_owned</span>(),
			<span class="ident">urls</span>: <span class="macro">vec!</span>[<span class="string">&quot;https://example.org/foo/api/v1&quot;</span>.<span class="ident">to_owned</span>()]
		};
		<span class="ident">route</span>.<span class="ident">with_openapi</span>(<span class="ident">info</span>, <span class="op">|</span><span class="kw-2">mut</span> <span class="ident">route</span><span class="op">|</span> {
			<span class="ident">route</span>.<span class="ident">resource</span>::<span class="op">&lt;</span><span class="ident">FooResource</span><span class="op">&gt;</span>(<span class="string">&quot;foo&quot;</span>);
			<span class="ident">route</span>.<span class="ident">get_openapi</span>(<span class="string">&quot;openapi&quot;</span>);
		});
	}));
}</code></pre></div>
<p>Above example adds the resource as before, but adds another endpoint that we specified as <code>/openapi</code>
that will return the generated openapi specification. This allows you to easily write clients
in different languages without worying to exactly replicate your api in each of those languages.</p>
<p>However, as of right now there is one caveat. If you wrote code before enabling the openapi feature,
it is likely to break. This is because of the new requirement of <code>OpenapiType</code> for all types used
with resources, even outside of the <code>with_openapi</code> scope. This issue will eventually be resolved.
If you are writing a library that uses gotham-restful, make sure that you expose an openapi feature.
In other words, put</p>
<div class="example-wrap"><pre class="language-toml"><code>[features]
openapi = [&quot;gotham-restful/openapi&quot;]</code></pre></div>
<p>into your libraries <code>Cargo.toml</code> and use the following for all types used with handlers:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Deserialize</span>, <span class="ident">Serialize</span>)]</span>
<span class="attribute">#[<span class="ident">cfg_attr</span>(<span class="ident">feature</span> <span class="op">=</span> <span class="string">&quot;openapi&quot;</span>, <span class="ident">derive</span>(<span class="ident">OpenapiType</span>))]</span>
<span class="kw">struct</span> <span class="ident">Foo</span>;</code></pre></div>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<p>There is a lack of good examples, but there is currently a collection of code in the <a href="https://gitlab.com/msrd0/gotham-restful/tree/master/example">example</a>
directory, that might help you. Any help writing more examples is highly appreciated.</p>
<h2 id="license"><a href="#license">License</a></h2>
<p>Licensed under your option of:</p>
<ul>
<li><a href="https://gitlab.com/msrd0/gotham-restful/blob/master/LICENSE-Apache">Apache License Version 2.0</a></li>
<li><a href="https://gitlab.com/msrd0/gotham-restful/blob/master/LICENSE-EPL">Eclipse Public License Version 2.0</a></li>
</ul>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="../gotham/index.html" title="mod gotham">gotham</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use gotham::hyper::header::<a class="struct" href="../http/header/name/struct.HeaderName.html" title="struct http::header::name::HeaderName">HeaderName</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use gotham::hyper::<a class="struct" href="../http/status/struct.StatusCode.html" title="struct http::status::StatusCode">StatusCode</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use gotham::state::<a class="trait" href="../gotham/state/from_state/trait.FromState.html" title="trait gotham::state::from_state::FromState">FromState</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use gotham::state::<a class="struct" href="../gotham/state/struct.State.html" title="struct gotham::state::State">State</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use mime::<a class="struct" href="../mime/struct.Mime.html" title="struct mime::Mime">Mime</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use result::AuthError::<a class="enum" href="enum.AuthError.html" title="enum gotham_restful::AuthError">Forbidden</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AuthMiddleware.html" title="gotham_restful::AuthMiddleware struct">AuthMiddleware</a></div><div class="item-right docblock-short"><p>This is the auth middleware. To use it, first make sure you have the <code>auth</code> feature enabled. Then
simply add it to your pipeline and request it inside your handler:</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AuthValidation.html" title="gotham_restful::AuthValidation struct">AuthValidation</a></div><div class="item-right docblock-short"><p>Contains the various validations that are applied after decoding a JWT.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CorsConfig.html" title="gotham_restful::CorsConfig struct">CorsConfig</a></div><div class="item-right docblock-short"><p>This is the configuration that the CORS handler will follow. Its default configuration is basically
not to touch any responses, resulting in the browser’s default behaviour.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.NoContent.html" title="gotham_restful::NoContent struct">NoContent</a></div><div class="item-right docblock-short"><p>This is the return type of a resource that doesn’t actually return something. It will result
in a <em>204 No Content</em> answer by default. You don’t need to use this type directly if using
the function attributes:</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OpenapiInfo.html" title="gotham_restful::OpenapiInfo struct">OpenapiInfo</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OpenapiSchema.html" title="gotham_restful::OpenapiSchema struct">OpenapiSchema</a></div><div class="item-right docblock-short"><p>This struct needs to be available for every type that can be part of an OpenAPI Spec. It is
already implemented for primitive types, String, Vec, Option and the like. To have it available
for your type, simply derive from <a href="trait.OpenapiType.html" title="OpenapiType">OpenapiType</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Raw.html" title="gotham_restful::Raw struct">Raw</a></div><div class="item-right docblock-short"><p>This type can be used both as a raw request body, as well as as a raw response. However, all types
of request bodies are accepted by this type. It is therefore recommended to derive your own type
from <a href="trait.RequestBody.html" title="RequestBody">RequestBody</a> and only use this when you need to return a raw response. This is a usage
example that simply returns its body:</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Response.html" title="gotham_restful::Response struct">Response</a></div><div class="item-right docblock-short"><p>A response, used to create the final gotham response from.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StaticAuthHandler.html" title="gotham_restful::StaticAuthHandler struct">StaticAuthHandler</a></div><div class="item-right docblock-short"><p>An <a href="trait.AuthHandler.html" title="AuthHandler">AuthHandler</a> returning always the same secret. See <a href="struct.AuthMiddleware.html" title="AuthMiddleware">AuthMiddleware</a> for a usage example.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Success.html" title="gotham_restful::Success struct">Success</a></div><div class="item-right docblock-short"><p>This can be returned from a resource when there is no cause of an error. It behaves similar to a
smart pointer like box, it that it implements <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="AsRef">AsRef</a>, <a href="https://doc.rust-lang.org/1.60.0/core/ops/deref/trait.Deref.html" title="Deref">Deref</a> and the likes.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AuthError.html" title="gotham_restful::AuthError enum">AuthError</a></div><div class="item-right docblock-short"><p>This is an error type that always yields a <em>403 Forbidden</em> response. This type is best used in
combination with <a href="type.AuthSuccess.html" title="AuthSuccess">AuthSuccess</a> or <a href="type.AuthResult.html" title="AuthResult">AuthResult</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AuthErrorOrOther.html" title="gotham_restful::AuthErrorOrOther enum">AuthErrorOrOther</a></div><div class="item-right docblock-short"><p>This is an error type that either yields a <em>403 Forbidden</em> respone if produced from an authentication
error, or delegates to another error type. This type is best used with <a href="type.AuthResult.html" title="AuthResult">AuthResult</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AuthSource.html" title="gotham_restful::AuthSource enum">AuthSource</a></div><div class="item-right docblock-short"><p>The source of the authentication token in the request.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AuthStatus.html" title="gotham_restful::AuthStatus enum">AuthStatus</a></div><div class="item-right docblock-short"><p>The authentication status returned by the auth middleware for each request.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Origin.html" title="gotham_restful::Origin enum">Origin</a></div><div class="item-right docblock-short"><p>Specify the allowed origins of the request. It is up to the browser to check the validity of the
origin. This, when sent to the browser, will indicate whether or not the request’s origin was
allowed to make the request.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.AuthHandler.html" title="gotham_restful::AuthHandler trait">AuthHandler</a></div><div class="item-right docblock-short"><p>This trait will help the auth middleware to determine the validity of an authentication token.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.CorsRoute.html" title="gotham_restful::CorsRoute trait">CorsRoute</a></div><div class="item-right docblock-short"><p>Add CORS routing for your path. This is required for handling preflight requests.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DrawResourceRoutes.html" title="gotham_restful::DrawResourceRoutes trait">DrawResourceRoutes</a></div><div class="item-right docblock-short"><p>This trait allows to draw routes within an resource. Use this only inside the
<a href="trait.Resource.html#tymethod.setup" title="Resource::setup">Resource::setup</a> method.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DrawResources.html" title="gotham_restful::DrawResources trait">DrawResources</a></div><div class="item-right docblock-short"><p>This trait adds the <code>resource</code> method to gotham’s routing. It allows you to register
any RESTful <a href="trait.Resource.html" title="Resource">Resource</a> with a path.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FromBody.html" title="gotham_restful::FromBody trait">FromBody</a></div><div class="item-right docblock-short"><p>This trait should be implemented for every type that can be built from an HTTP request body
plus its media type.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.GetOpenapi.html" title="gotham_restful::GetOpenapi trait">GetOpenapi</a></div><div class="item-right docblock-short"><p>This trait adds the <code>get_openapi</code> method to an OpenAPI-aware router.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.IntoResponseError.html" title="gotham_restful::IntoResponseError trait">IntoResponseError</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.OpenapiType.html" title="gotham_restful::OpenapiType trait">OpenapiType</a></div><div class="item-right docblock-short"><p>This trait needs to be implemented by every type that is being used in the OpenAPI Spec. It gives
access to the <a href="struct.OpenapiSchema.html" title="OpenapiSchema">OpenapiSchema</a> of this type. It is provided for primitive types, String and the
like. For use on your own types, there is a derive macro:</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.RequestBody.html" title="gotham_restful::RequestBody trait">RequestBody</a></div><div class="item-right docblock-short"><p>A type that can be used inside a request body. Implemented for every type that is deserializable
with serde. If the <code>openapi</code> feature is used, it must also be of type <a href="trait.OpenapiType.html">OpenapiType</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Resource.html" title="gotham_restful::Resource trait">Resource</a></div><div class="item-right docblock-short"><p>This trait must be implemented for every resource. It allows you to register the different
methods that can be handled by this resource to be registered with the underlying router.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceChange.html" title="gotham_restful::ResourceChange trait">ResourceChange</a></div><div class="item-right docblock-short"><p>The change <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceChangeAll.html" title="gotham_restful::ResourceChangeAll trait">ResourceChangeAll</a></div><div class="item-right docblock-short"><p>The change_all <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceCreate.html" title="gotham_restful::ResourceCreate trait">ResourceCreate</a></div><div class="item-right docblock-short"><p>The create <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceID.html" title="gotham_restful::ResourceID trait">ResourceID</a></div><div class="item-right docblock-short"><p>A type than can be used as a parameter to a resource method. Implemented for every type
that is deserialize and thread-safe. If the <code>openapi</code> feature is used, it must also be of
type <a href="trait.OpenapiType.html">OpenapiType</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceMethod.html" title="gotham_restful::ResourceMethod trait">ResourceMethod</a></div><div class="item-right docblock-short"><p>A common trait for every resource method. It defines the return type as well as some general
information about a resource method.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceRead.html" title="gotham_restful::ResourceRead trait">ResourceRead</a></div><div class="item-right docblock-short"><p>The read <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceReadAll.html" title="gotham_restful::ResourceReadAll trait">ResourceReadAll</a></div><div class="item-right docblock-short"><p>The read_all <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceRemove.html" title="gotham_restful::ResourceRemove trait">ResourceRemove</a></div><div class="item-right docblock-short"><p>The remove <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceRemoveAll.html" title="gotham_restful::ResourceRemoveAll trait">ResourceRemoveAll</a></div><div class="item-right docblock-short"><p>The remove_all <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceResult.html" title="gotham_restful::ResourceResult trait">ResourceResult</a></div><div class="item-right docblock-short"><p>A trait provided to convert a resource’s result to json.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceSearch.html" title="gotham_restful::ResourceSearch trait">ResourceSearch</a></div><div class="item-right docblock-short"><p>The search <a href="trait.ResourceMethod.html" title="ResourceMethod">ResourceMethod</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResourceType.html" title="gotham_restful::ResourceType trait">ResourceType</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ResponseBody.html" title="gotham_restful::ResponseBody trait">ResponseBody</a></div><div class="item-right docblock-short"><p>A type that can be used inside a response body. Implemented for every type that is
serializable with serde. If the <code>openapi</code> feature is used, it must also be of type
<a href="trait.OpenapiType.html">OpenapiType</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.WithOpenapi.html" title="gotham_restful::WithOpenapi trait">WithOpenapi</a></div><div class="item-right docblock-short"><p>This trait adds the <code>with_openapi</code> method to gotham’s routing. It turns the default
router into one that will only allow RESTful resources, but record them and generate
an OpenAPI specification on request.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.handle_cors.html" title="gotham_restful::handle_cors fn">handle_cors</a></div><div class="item-right docblock-short"><p>Handle CORS for a non-preflight request. This means manipulating the <code>res</code> HTTP headers so that
the response is aligned with the <code>state</code>’s <a href="struct.CorsConfig.html" title="CorsConfig">CorsConfig</a>.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.AuthResult.html" title="gotham_restful::AuthResult type">AuthResult</a></div><div class="item-right docblock-short"><p>This return type can be used to map another <a href="trait.ResourceResult.html">ResourceResult</a> that can
only be returned if the client is authenticated. Otherwise, an empty <em>403 Forbidden</em> response
will be issued.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.AuthSuccess.html" title="gotham_restful::AuthSuccess type">AuthSuccess</a></div><div class="item-right docblock-short"><p>This return type can be used to map another <a href="trait.ResourceResult.html">ResourceResult</a> that can
only be returned if the client is authenticated. Otherwise, an empty <em>403 Forbidden</em> response
will be issued.</p>
</div></div></div><h2 id="attributes" class="small-section-header"><a href="#attributes">Attribute Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.change.html" title="gotham_restful::change attr">change</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.change_all.html" title="gotham_restful::change_all attr">change_all</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.create.html" title="gotham_restful::create attr">create</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.read.html" title="gotham_restful::read attr">read</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.read_all.html" title="gotham_restful::read_all attr">read_all</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.remove.html" title="gotham_restful::remove attr">remove</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.remove_all.html" title="gotham_restful::remove_all attr">remove_all</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.search.html" title="gotham_restful::search attr">search</a></div><div class="item-right docblock-short"></div></div></div><h2 id="derives" class="small-section-header"><a href="#derives">Derive Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.FromBody.html" title="gotham_restful::FromBody derive">FromBody</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.OpenapiType.html" title="gotham_restful::OpenapiType derive">OpenapiType</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.RequestBody.html" title="gotham_restful::RequestBody derive">RequestBody</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.Resource.html" title="gotham_restful::Resource derive">Resource</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.ResourceError.html" title="gotham_restful::ResourceError derive">ResourceError</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="gotham_restful" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (Arch Linux rust 1:1.60.0-1)" ></div>
</body></html>