<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Provides a dynamic value type abstraction."><title>minijinja::value - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-aa0817cf.css"><script id="default-settings" 
data-use_system_theme="false"
data-theme="ayu"></script><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="minijinja" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-68b7e25d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../minijinja/index.html"><img src="https://github.com/mitsuhiko/minijinja/raw/main/artwork/logo-square.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../minijinja/index.html"><img src="https://github.com/mitsuhiko/minijinja/raw/main/artwork/logo-square.png" alt="logo"></a><h2><a href="../../minijinja/index.html">minijinja</a><span class="version">1.0.21</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module value</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#basic-value-conversions" title="Basic Value Conversions">Basic Value Conversions</a></li><li><a href="#serde-conversions" title="Serde Conversions">Serde Conversions</a></li><li><a href="#value-function-arguments" title="Value Function Arguments">Value Function Arguments</a></li><li><a href="#memory-management" title="Memory Management">Memory Management</a></li><li><a href="#html-escaping" title="HTML Escaping">HTML Escaping</a></li><li><a href="#dynamic-objects" title="Dynamic Objects">Dynamic Objects</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate minijinja</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">minijinja</a></div><h1>Module <span>value</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/minijinja/value/mod.rs.html#1-1570">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Provides a dynamic value type abstraction.</p>
<p>This module gives access to a dynamically typed value which is used by
the template engine during execution.</p>
<p>For the most part the existence of the value type can be ignored as
MiniJinja will perform the necessary conversions for you.  For instance
if you write a filter that converts a string you can directly declare the
filter to take a <a href="https://doc.rust-lang.org/1.90.0/alloc/string/struct.String.html" title="struct alloc::string::String"><code>String</code></a>.  However for some more
advanced use cases it’s useful to know that this type exists.</p>
<h2 id="basic-value-conversions"><a class="doc-anchor" href="#basic-value-conversions">§</a>Basic Value Conversions</h2>
<p>Values are typically created via the <a href="https://doc.rust-lang.org/1.90.0/core/convert/trait.From.html" title="trait core::convert::From"><code>From</code></a> trait:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>int_value = Value::from(<span class="number">42</span>);
<span class="kw">let </span>none_value = Value::from(());
<span class="kw">let </span>true_value = Value::from(<span class="bool-val">true</span>);</code></pre></div>
<p>Or via the <a href="https://doc.rust-lang.org/1.90.0/core/iter/traits/collect/trait.FromIterator.html" title="trait core::iter::traits::collect::FromIterator"><code>FromIterator</code></a> trait:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="comment">// collection into a sequence
</span><span class="kw">let </span>value: Value = (<span class="number">1</span>..<span class="number">10</span>).into_iter().collect();

<span class="comment">// collection into a map
</span><span class="kw">let </span>value: Value = [(<span class="string">"key"</span>, <span class="string">"value"</span>)].into_iter().collect();</code></pre></div>
<p>For certain types of iterators (<code>Send</code> + <code>Sync</code> + <code>'static</code>) it’s also
possible to make the value lazily iterate over the value by using the
<code>Value::make_one_shot_iterator</code> function instead:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>value: Value = Value::make_one_shot_iterator(<span class="number">1</span>..<span class="number">10</span>);</code></pre></div>
<p>To to into the inverse directly the various <a href="https://doc.rust-lang.org/1.90.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom"><code>TryFrom</code></a>
implementations can be used:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::convert::TryFrom;
<span class="kw">let </span>v = u64::try_from(Value::from(<span class="number">42</span>)).unwrap();</code></pre></div>
<p>The special <a href="struct.Value.html#associatedconstant.UNDEFINED" title="associated constant minijinja::value::Value::UNDEFINED"><code>Undefined</code></a> value also exists but does not
have a rust equivalent.  It can be created via the <a href="struct.Value.html#associatedconstant.UNDEFINED" title="associated constant minijinja::value::Value::UNDEFINED"><code>UNDEFINED</code></a>
constant.</p>
<h2 id="serde-conversions"><a class="doc-anchor" href="#serde-conversions">§</a>Serde Conversions</h2>
<p>MiniJinja will usually however create values via an indirection via <a href="../../serde/index.html" title="mod serde"><code>serde</code></a> when
a template is rendered or an expression is evaluated.  This can also be
triggered manually by using the <a href="struct.Value.html#method.from_serialize" title="associated function minijinja::value::Value::from_serialize"><code>Value::from_serialize</code></a> method:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>value = Value::from_serialize(<span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</code></pre></div>
<p>The inverse of that operation is to pass a value directly as serializer to
a type that supports deserialization.  This requires the <code>deserialization</code>
feature.</p>
<h2 id="value-function-arguments"><a class="doc-anchor" href="#value-function-arguments">§</a>Value Function Arguments</h2>
<p><a href="../filters/index.html" title="mod minijinja::filters">Filters</a> and <a href="../tests/index.html" title="mod minijinja::tests">tests</a> can take values as arguments
but optionally also rust types directly.  This conversion for function arguments
is performed by the <a href="trait.FunctionArgs.html" title="trait minijinja::value::FunctionArgs"><code>FunctionArgs</code></a> and related traits (<a href="trait.ArgType.html" title="trait minijinja::value::ArgType"><code>ArgType</code></a>, <a href="trait.FunctionResult.html" title="trait minijinja::value::FunctionResult"><code>FunctionResult</code></a>).</p>
<h2 id="memory-management"><a class="doc-anchor" href="#memory-management">§</a>Memory Management</h2>
<p>Values are immutable objects which are internally reference counted which
means they can be copied relatively cheaply.  Special care must be taken
so that cycles are not created to avoid causing memory leaks.</p>
<h2 id="html-escaping"><a class="doc-anchor" href="#html-escaping">§</a>HTML Escaping</h2>
<p>MiniJinja inherits the general desire to be clever about escaping.  For this
purpose a value will (when auto escaping is enabled) always be escaped.  To
prevent this behavior the <a href="../filters/fn.safe.html" title="fn minijinja::filters::safe"><code>safe</code></a> filter can be used
in the template.  Outside of templates the <a href="struct.Value.html#method.from_safe_string" title="associated function minijinja::value::Value::from_safe_string"><code>Value::from_safe_string</code></a> method
can be used to achieve the same result.</p>
<h2 id="dynamic-objects"><a class="doc-anchor" href="#dynamic-objects">§</a>Dynamic Objects</h2>
<p>Values can also hold “dynamic” objects.  These are objects which implement the
<a href="trait.Object.html" title="trait minijinja::value::Object"><code>Object</code></a> trait and optionally <a href="trait.SeqObject.html" title="trait minijinja::value::SeqObject"><code>SeqObject</code></a> or <a href="trait.StructObject.html" title="trait minijinja::value::StructObject"><code>StructObject</code></a>  These can
be used to implement dynamic functionality such as stateful values and more.
Dynamic objects are internally also used to implement the special <code>loop</code>
variable or macros.</p>
<p>To create a dynamic <code>Value</code> object, use <a href="struct.Value.html#method.from_object" title="associated function minijinja::value::Value::from_object"><code>Value::from_object</code></a>,
<a href="struct.Value.html#method.from_seq_object" title="associated function minijinja::value::Value::from_seq_object"><code>Value::from_seq_object</code></a>, <a href="struct.Value.html#method.from_struct_object" title="associated function minijinja::value::Value::from_struct_object"><code>Value::from_struct_object</code></a> or the <code>From&lt;Arc&lt;T: Object&gt;&gt;</code> implementations for <code>Value</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[derive(Debug)]
</span><span class="kw">struct </span>Foo;

<span class="kw">impl </span>Object <span class="kw">for </span>Foo {
    <span class="comment">/* implementation */
</span>}

<span class="kw">let </span>value = Value::from_object(Foo);
<span class="kw">let </span>value = Value::from(Arc::new(Foo));
<span class="kw">let </span>value = Value::from(Arc::new(Foo) <span class="kw">as </span>Arc&lt;<span class="kw">dyn </span>Object&gt;);</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Kwargs.html" title="struct minijinja::value::Kwargs">Kwargs</a></dt><dd>Utility to accept keyword arguments.</dd><dt><a class="struct" href="struct.Rest.html" title="struct minijinja::value::Rest">Rest</a></dt><dd>Utility type to capture remaining arguments.</dd><dt><a class="struct" href="struct.SeqObjectIter.html" title="struct minijinja::value::SeqObjectIter">SeqObject<wbr>Iter</a></dt><dd>Iterates over <a href="trait.SeqObject.html" title="trait minijinja::value::SeqObject"><code>SeqObject</code></a></dd><dt><a class="struct" href="struct.Value.html" title="struct minijinja::value::Value">Value</a></dt><dd>Represents a dynamically typed value in the template engine.</dd><dt><a class="struct" href="struct.ValueIter.html" title="struct minijinja::value::ValueIter">Value<wbr>Iter</a></dt><dd>Iterates over a value.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.ObjectKind.html" title="enum minijinja::value::ObjectKind">Object<wbr>Kind</a></dt><dd>A kind defines the object’s behavior.</dd><dt><a class="enum" href="enum.ValueKind.html" title="enum minijinja::value::ValueKind">Value<wbr>Kind</a></dt><dd>Describes the kind of value.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.ArgType.html" title="trait minijinja::value::ArgType">ArgType</a></dt><dd>A trait implemented by all filter/test argument types.</dd><dt><a class="trait" href="trait.FunctionArgs.html" title="trait minijinja::value::FunctionArgs">Function<wbr>Args</a></dt><dd>Helper trait representing valid filter, test and function arguments.</dd><dt><a class="trait" href="trait.FunctionResult.html" title="trait minijinja::value::FunctionResult">Function<wbr>Result</a></dt><dd>A utility trait that represents the return value of functions and filters.</dd><dt><a class="trait" href="trait.IteratorObject.html" title="trait minijinja::value::IteratorObject">Iterator<wbr>Object</a></dt><dd>Represents a dynamic iterable.</dd><dt><a class="trait" href="trait.Object.html" title="trait minijinja::value::Object">Object</a></dt><dd>A utility trait that represents a dynamic object.</dd><dt><a class="trait" href="trait.SeqObject.html" title="trait minijinja::value::SeqObject">SeqObject</a></dt><dd>Provides the behavior of an <a href="trait.Object.html" title="trait minijinja::value::Object"><code>Object</code></a> holding sequence of values.</dd><dt><a class="trait" href="trait.StructObject.html" title="trait minijinja::value::StructObject">Struct<wbr>Object</a></dt><dd>Provides the behavior of an <a href="trait.Object.html" title="trait minijinja::value::Object"><code>Object</code></a> holding a struct.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.from_args.html" title="fn minijinja::value::from_args">from_<wbr>args</a></dt><dd>Utility function to convert a slice of values into arguments.</dd><dt><a class="fn" href="fn.intern.html" title="fn minijinja::value::intern">intern</a></dt><dd>Intern a string.</dd><dt><a class="fn" href="fn.serializing_for_value.html" title="fn minijinja::value::serializing_for_value">serializing_<wbr>for_<wbr>value</a></dt><dd>Function that returns true when serialization for <a href="struct.Value.html" title="struct minijinja::value::Value"><code>Value</code></a> is taking place.</dd></dl></section></div></main></body></html>