<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Initialize the AVCodecContext to use the given AVCodec. Prior to using this function the context has to be allocated with avcodec_alloc_context3()."><title>avcodec_open2 in ffmpeg_sys_next - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-aa0817cf.css"><script id="default-settings" 
data-use_system_theme="false"
data-theme="ayu"></script><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="ffmpeg_sys_next" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-68b7e25d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../ffmpeg_sys_next/index.html">ffmpeg_<wbr>sys_<wbr>next</a><span class="version">7.1.3</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">ffmpeg_sys_next</a></div><h1>Function <span class="fn">avcodec_open2</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/ffmpeg_sys_next/tmp/tmp.kDVeIcwuZl/mstickerlib-0.2.1/target/debug/build/ffmpeg-sys-next-cfa8ef80ac54b02a/out/bindings.rs.html#7916-7920">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn avcodec_open2(
    avctx: <a class="primitive" href="https://doc.rust-lang.org/1.90.0/std/primitive.pointer.html">*mut </a><a class="struct" href="struct.AVCodecContext.html" title="struct ffmpeg_sys_next::AVCodecContext">AVCodecContext</a>,
    codec: <a class="primitive" href="https://doc.rust-lang.org/1.90.0/std/primitive.pointer.html">*const </a><a class="struct" href="struct.AVCodec.html" title="struct ffmpeg_sys_next::AVCodec">AVCodec</a>,
    options: <a class="primitive" href="https://doc.rust-lang.org/1.90.0/std/primitive.pointer.html">*mut </a><a class="primitive" href="https://doc.rust-lang.org/1.90.0/std/primitive.pointer.html">*mut </a><a class="struct" href="struct.AVDictionary.html" title="struct ffmpeg_sys_next::AVDictionary">AVDictionary</a>,
) -&gt; <a class="type" href="../libc/primitives/type.c_int.html" title="type libc::primitives::c_int">c_int</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Initialize the AVCodecContext to use the given AVCodec. Prior to using this
function the context has to be allocated with avcodec_alloc_context3().</p>
<p>The functions avcodec_find_decoder_by_name(), avcodec_find_encoder_by_name(),
avcodec_find_decoder() and avcodec_find_encoder() provide an easy way for
retrieving a codec.</p>
<p>Depending on the codec, you might need to set options in the codec context
also for decoding (e.g. width, height, or the pixel or audio sample format in
the case the information is not available in the bitstream, as when decoding
raw audio or video).</p>
<p>Options in the codec context can be set either by setting them in the options
AVDictionary, or by setting the values in the context itself, directly or by
using the av_opt_set() API before calling this function.</p>
<p>Example:
@code
av_dict_set(&amp;opts, “b”, “2.5M”, 0);
codec = avcodec_find_decoder(AV_CODEC_ID_H264);
if (!codec)
exit(1);</p>
<p>context = avcodec_alloc_context3(codec);</p>
<p>if (avcodec_open2(context, codec, opts) &lt; 0)
exit(1);
@endcode</p>
<p>In the case AVCodecParameters are available (e.g. when demuxing a stream
using libavformat, and accessing the AVStream contained in the demuxer), the
codec parameters can be copied to the codec context using
avcodec_parameters_to_context(), as in the following example:</p>
<p>@code
AVStream *stream = …;
context = avcodec_alloc_context3(codec);
if (avcodec_parameters_to_context(context, stream-&gt;codecpar) &lt; 0)
exit(1);
if (avcodec_open2(context, codec, NULL) &lt; 0)
exit(1);
@endcode</p>
<p>@note Always call this function before using decoding routines (such as
@ref avcodec_receive_frame()).</p>
<p>@param avctx The context to initialize.
@param codec The codec to open this context for. If a non-NULL codec has been
previously passed to avcodec_alloc_context3() or
for this context, then this parameter MUST be either NULL or
equal to the previously passed codec.
@param options A dictionary filled with AVCodecContext and codec-private
options, which are set on top of the options already set in
avctx, can be NULL. On return this object will be filled with
options that were not found in the avctx codec context.</p>
<p>@return zero on success, a negative value on error
@see avcodec_alloc_context3(), avcodec_find_decoder(), avcodec_find_encoder(),
av_dict_set(), av_opt_set(), av_opt_find(), avcodec_parameters_to_context()</p>
</div></details></section></div></main></body></html>